---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const recentPosts = allPosts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 6);
---

<BaseLayout title="Hem" description="Välkommen till vår sajt">
  <section class="container mx-auto px-4 py-12">
    <h1 class="text-4xl font-bold mb-4">Välkommen</h1>
    <p class="text-xl text-gray-600 mb-8">
      Din beskrivning här. Redigera denna sida för att anpassa din startsida.
    </p>
  </section>

  <section class="container mx-auto px-4 py-8">
    <h2 class="text-2xl font-bold mb-6">Senaste artiklarna</h2>

    {recentPosts.length > 0 ? (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {recentPosts.map(post => (
          <article class="border rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
            {post.data.heroImage && (
              <img
                src={post.data.heroImage}
                alt={post.data.title}
                class="w-full h-48 object-cover"
              />
            )}
            <div class="p-4">
              <h3 class="font-bold text-lg mb-2">
                <a href={`/blog/${post.slug}`} class="hover:text-blue-600">
                  {post.data.title}
                </a>
              </h3>
              <p class="text-gray-600 text-sm mb-2">
                {post.data.description}
              </p>
              <time class="text-gray-400 text-sm">
                {new Intl.DateTimeFormat('sv-SE').format(post.data.pubDate)}
              </time>
            </div>
          </article>
        ))}
      </div>
    ) : (
      <p class="text-gray-500">Inga artiklar publicerade ännu.</p>
    )}

    {recentPosts.length > 0 && (
      <div class="text-center mt-8">
        <a
          href="/blog"
          class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
        >
          Se alla artiklar
        </a>
      </div>
    )}
  </section>
</BaseLayout>

<style>
  .grid {
    display: grid;
  }

  .grid-cols-1 {
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }

  @media (min-width: 768px) {
    .md\:grid-cols-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (min-width: 1024px) {
    .lg\:grid-cols-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
  }

  .text-2xl {
    font-size: 1.5rem;
  }

  .border {
    border: 1px solid #e5e7eb;
  }

  .overflow-hidden {
    overflow: hidden;
  }

  .transition-shadow {
    transition: box-shadow 0.15s ease-in-out;
  }

  .hover\:shadow-lg:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }

  .object-cover {
    object-fit: cover;
  }

  .h-48 {
    height: 12rem;
  }

  .text-lg {
    font-size: 1.125rem;
  }

  .inline-block {
    display: inline-block;
  }

  .px-6 {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  .py-3 {
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
  }

  .bg-blue-600 {
    background-color: #2563eb;
  }

  .text-white {
    color: #ffffff;
  }

  .hover\:bg-blue-700:hover {
    background-color: #1d4ed8;
  }

  .py-12 {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }
</style>
